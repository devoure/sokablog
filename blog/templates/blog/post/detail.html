{% extends "blog/base.html" %}
{% block title %}{{post.title}}{% endblock %}
{% block content %}
<h1>Soka blog</h1>
<h2>{{post.title}}</h2>
<p style="color:red"><i>
Published {{post.publish}} by {{post.author}}
</p></i>
{{ post.body|linebreaks }}
<p>
<a href="{% url "blog:post_share" post.id %}">Share this post</a>
</p>
{% with comment.count as total_comments %}
<h3>
  {{total_comments}} comment{{total_comments|pluralize}}
  <!--add a 's' to the suffix if count is greater than 1-->
</h3>
{% endwith %}
{% for comment in comments %}
<p>
Comment {{ forloop.counter}} by {{ comment.name }}
{{ comment.created }}
</p>
{{ comment.body|linebreaks }}
{% empty %}
<p>There are no comments yet.</p>
{% endfor %}
{% if messages %}
<ul>
  {% for message in messages %}
  <li{% if message.tags %} class="{{message.tags}}"{% endif %}>{{ message}}</li>
  {% endfor %}
  </ul>
{% else %}
<h2><u>Add a new comment </h2></u>
<form action="." method="post">
  {{ comment_form.as_p }}
  {% csrf_token %}
  <p><input type="submit" value="Add comment"></p>
  </form>
  {% endif %}

{% endblock %}
